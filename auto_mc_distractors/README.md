# Auto MC Distractors

Генерирует на карточке **множественный выбор** без ручного внесения вариантов.
Берёт правильный ответ из поля (`Word` по умолчанию), автоматически подбирает
похожие слова из той же колоды (или всей коллекции) и рисует кнопки прямо при
показе карточки.

> ⚠️ **Важно:** Python-аддоны работают только на **десктопе** (Anki для Windows/macOS/Linux).
> На мобильных (AnkiDroid/AnkiMobile) этот аддон не выполняется. Для телефонов
> используйте связку с JS-шаблоном и/или аддоном [auto_mc_tools](../auto_mc_tools).

---

## Установка

1. `Инструменты → Дополнения → Открыть папку дополнений`.
2. Скопируйте папку `auto_mc_distractors` сюда.
3. Перезапустите Anki.

---

## Использование

1. В типе заметки убедитесь, что есть поле с правильным словом (по умолчанию **Word**).
2. На **обороте** карточки вставьте в шаблон строку:

   ```html
   {{auto_mc:Word}}
   ```
> Если поле называется иначе — укажите своё имя поля в конфиге (см. ниже).

3. Повторяйте карточку на десктопе — появятся крупные варианты ответа.
Правильный/неправильный подсвечиваются цветом.

## Настройки (Конфигурация аддона)

`Инструменты → Дополнения → Auto MC Distractors → Конфигурация`

```json
{
  "distractorCount": 3,   // сколько ложных вариантов добавлять (2–5 обычно достаточно)
  "sameDeckOnly": true,   // брать кандидатов только из той же колоды (true) или из всей коллекции (false)
  "fieldName": "Word"     // из какого поля брать правильный ответ
}
```

## Как это работает

* Аддон находит другие заметки и извлекает из выбранного поля слова-кандидаты.
* Выбирает похожие по длине и написанию (быстрые эвристики).
* Генерирует N дистракторов, перемешивает с правильным вариантом и рендерит кнопки (HTML+CSS+JS) на обороте.

## Совместимость

* Протестировано на Anki 25.07.5 (Qt6, PyQt6).
* Должно работать на Anki 2.1+; в коде предусмотрены «мягкие» ветки для старых API

## Частые вопросы

### Почему на телефоне пусто?

> Python-аддоны не выполняются на мобильных. Используйте
> [auto_mc_tools](git@github.com:SMPesnya/anki-plugins.git) + JS-шаблон (см. его README)

### Можно ли менять внешний вид?

> Да: это обычный HTML/CSS в выходе фильтра. При желании подредактируйте стили в шаблоне.
